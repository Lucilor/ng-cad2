<div>
	<div class="not-allowed-area" *ngIf="disabled"></div>
	<div style="margin: 10px;">
		<mat-slide-toggle [checked]="multiSelect" (change)="toggleMultiSelect()">{{ multiSelect ? "多选" : "单选" }}</mat-slide-toggle>
	</div>
	<perfect-scrollbar>
		<mat-accordion multi>
			<mat-expansion-panel expanded>
				<mat-expansion-panel-header>
					<mat-panel-title>CAD</mat-panel-title>
				</mat-expansion-panel-header>
				<div class="btn-group">
					<button mat-raised-button color="primary" (click)="selectAll('cads')">全选</button>
					<button mat-raised-button color="primary" (click)="unselectAll('cads')">全不选</button>
				</div>
				<div class="checkbox-group add-empty-msg">
					<div class="cad-image" *ngFor="let item of cads; let i = index" (contextmenu)="onContextMenu($event, item.data, false)">
						<mat-checkbox
							class="example-margin"
							[checked]="item.checked"
							[indeterminate]="item.indeterminate"
							(change)="clickCad('cads', i, $event)"
						>
							{{ item.data.name }}
						</mat-checkbox>
						<img [src]="item.img" (click)="clickCad('cads', i)" />
					</div>
				</div>
			</mat-expansion-panel>

			<mat-expansion-panel expanded>
				<mat-expansion-panel-header>
					<mat-panel-title>关联CAD</mat-panel-title>
				</mat-expansion-panel-header>
				<div class="btn-group">
					<button mat-raised-button color="primary" (click)="selectAll('partners')">全选</button>
					<button mat-raised-button color="primary" (click)="unselectAll('partners')">全不选</button>
				</div>
				<div class="checkbox-group add-empty-msg">
					<div
						class="cad-image"
						*ngFor="let item of partners; let i = index"
						(contextmenu)="onContextMenu($event, item.data, true)"
					>
						<mat-checkbox
							class="example-margin"
							[checked]="item.checked"
							[indeterminate]="item.indeterminate"
							(change)="clickCad('partners', i, $event)"
						>
							{{ item.data.name }}
						</mat-checkbox>
						<img [src]="item.img" (click)="clickCad('partners', i)" />
					</div>
				</div>
			</mat-expansion-panel>

			<mat-expansion-panel expanded>
				<mat-expansion-panel-header>
					<mat-panel-title>装配CAD</mat-panel-title>
				</mat-expansion-panel-header>
				<div class="btn-group">
					<button mat-raised-button color="primary" (click)="selectAll('components')">全选</button>
					<button mat-raised-button color="primary" (click)="unselectAll('components')">全不选</button>
				</div>
				<div class="checkbox-group add-empty-msg">
					<div
						class="cad-image"
						*ngFor="let item of components; let i = index"
						(contextmenu)="onContextMenu($event, item.data, true)"
					>
						<mat-checkbox
							class="example-margin"
							[checked]="item.checked"
							[indeterminate]="item.indeterminate"
							(change)="clickCad('components', i, $event)"
						>
							{{ item.data.name }}
						</mat-checkbox>
						<img [src]="item.img" (click)="clickCad('components', i)" />
					</div>
				</div>
			</mat-expansion-panel>
		</mat-accordion>
	</perfect-scrollbar>

	<div
		style="visibility: hidden; position: fixed;"
		[style.left]="contextMenuPosition.x"
		[style.top]="contextMenuPosition.y"
		[matMenuTriggerFor]="contextMenu"
	></div>
	<mat-menu #contextMenu="matMenu">
		<ng-template matMenuContent>
			<ng-container *ngIf="!contextMenuCad.isChild">
				<button mat-menu-item (click)="editChildren('partners')">编辑关联</button>
				<button mat-menu-item (click)="editChildren('components')">编辑装配</button>
			</ng-container>
			<button mat-menu-item (click)="downloadDxf()">下载dxf文件</button>
			<button mat-menu-item (click)="deleteSelected()">删除已选</button>
			<button mat-menu-item (click)="editSelected()">编辑已选</button>
		</ng-template>
	</mat-menu>
</div>
